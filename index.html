<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>印章自动生成</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="container">
    <div class="main-layout">
      <div class="canvas-wrap">
        <!-- 画布顶部操作按钮 - 分步显示 -->
        <div class="canvas-top-buttons">
          <div class="input-group">
            <label for="type">类型:</label>
            <select id="type">
              <option value="居民委员会">居民委员会</option>
              <option value="村民委员会">村民委员会</option>
            </select>
          </div>
          <div class="input-group">
            <label for="topText">单位名称:</label>
            <input id="topText" value="赣州市南昌县琴城镇新建社区" placeholder="输入单位名称" />
          </div>
          <div class="input-group">
            <label for="serial">行政代码:</label>
            <input id="serial" value="3610231000004" placeholder="输入行政代码" />
          </div>
          <button id="designComplete" class="primary-btn">设计完成</button>
          <label class="file-input-wrapper" id="uploadWrapper" style="display: none;">
            上传图片
            <input id="bgImage" type="file" accept="image/*" />
          </label>
          <button id="saveBtn" class="primary-btn" style="display: none;">保存并下载</button>
        </div>
        
        <div id="stage" class="stage">
          <canvas id="bgCanvas"></canvas>
          <img id="sealOverlay" alt="seal" draggable="false" ondragstart="return false" />
        </div>
        <div class="toolbar">
          <span id="coords">X: 0, Y: 0</span>
          <span id="canvasSize">画布尺寸: 0 x 0</span>
        </div>
      </div>
      
      <!-- 操作空间盒子 - 悬浮在页面右侧 -->
      <div class="controls-container">
        <button id="controlsToggle" class="controls-toggle">⚙️ 操作面板</button>
        <div id="controlsBox" class="controls-box" style="display: none;">
          <div class="controls">
            <div class="section-title">尺寸与样式</div>
            <label>
              圆直径(px)
              <div class="number-input-group">
                <button class="number-btn" onclick="changeValue('diameter', '-')">-</button>
                <input id="diameter" type="number" min="0" max="800" value="500" step="1" />
                <button class="number-btn" onclick="changeValue('diameter', '+')">+</button>
              </div>
            </label>
            <label>
              圆线宽(px)
              <div class="number-input-group">
                <button class="number-btn" onclick="changeValue('ringWidth', '-')">-</button>
                <input id="ringWidth" type="number" min="1" max="24" value="14" step="1" />
                <button class="number-btn" onclick="changeValue('ringWidth', '+')">+</button>
              </div>
            </label>
            <label>
              类型字号(px)
              <div class="number-input-group">
                <button class="number-btn" onclick="changeValue('fontSize', '-')">-</button>
                <input id="fontSize" type="number" min="0" max="64" value="42" step="1" />
                <button class="number-btn" onclick="changeValue('fontSize', '+')">+</button>
              </div>
            </label>

            <label>
              做旧程度
              <div class="number-input-group">
                <button class="number-btn" onclick="changeValue('roughness', '-')">-</button>
                <input id="roughness" type="number" min="0" max="100" value="0" step="5" />
                <button class="number-btn" onclick="changeValue('roughness', '+')">+</button>
              </div>
            </label>
            <div class="section-title">单位名称参数</div>
            <div class="arc-row">
              <label>
                起始角(°)
                <div class="number-input-group">
                  <button class="number-btn" onclick="changeValue('topStartDeg', '-')">-</button>
                  <input id="topStartDeg" type="number" min="0" max="360" value="174" step="1" />
                  <button class="number-btn" onclick="changeValue('topStartDeg', '+')">+</button>
                </div>
              </label>
              <label>
                距外圈(px)
                <div class="number-input-group">
                  <button class="number-btn" onclick="changeValue('topOffset', '-')">-</button>
                  <input id="topOffset" type="number" min="0" max="60" value="22" step="1" />
                  <button class="number-btn" onclick="changeValue('topOffset', '+')">+</button>
                </div>
              </label>
            </div>
            <div class="arc-row">
              <label>
                字距(倍数)
                <div class="number-input-group">
                  <button class="number-btn" onclick="changeValue('topSpacing', '-')">-</button>
                  <input id="topSpacing" type="number" min="0" max="1.6" value="1.0" step="0.01" />
                  <button class="number-btn" onclick="changeValue('topSpacing', '+')">+</button>
                </div>
              </label>
              <label>
                旋转偏移(°)
                <div class="number-input-group">
                  <button class="number-btn" onclick="changeValue('topRotateDeg', '-')">-</button>
                  <input id="topRotateDeg" type="number" min="-180" max="180" value="99" step="1" />
                  <button class="number-btn" onclick="changeValue('topRotateDeg', '+')">+</button>
                </div>
              </label>
            </div>
            <div class="arc-row">
              <label>
                字号(px)
                <div class="number-input-group">
                  <button class="number-btn" onclick="changeValue('topFontSize', '-')">-</button>
                  <input id="topFontSize" type="number" min="0" max="48" value="42" step="1" />
                  <button class="number-btn" onclick="changeValue('topFontSize', '+')">+</button>
                </div>
              </label>
              <label>
                字高(倍数)
                <div class="number-input-group">
                  <button class="number-btn" onclick="changeValue('topFontHeight', '-')">-</button>
                  <input id="topFontHeight" type="number" min="0.5" max="2.0" value="1.0" step="0.1" />
                  <button class="number-btn" onclick="changeValue('topFontHeight', '+')">+</button>
                </div>
              </label>
            </div>
            
            <div class="section-title">行政编码（下弧）参数</div>
            <div class="arc-row">
              <label>
                起始角(°)
                <div class="number-input-group">
                  <button class="number-btn" onclick="changeValue('bottomStartDeg', '-')">-</button>
                  <input id="bottomStartDeg" type="number" min="0" max="360" value="134" step="1" />
                  <button class="number-btn" onclick="changeValue('bottomStartDeg', '+')">+</button>
                </div>
              </label>
              <label>
                距外圈(px)
                <div class="number-input-group">
                  <button class="number-btn" onclick="changeValue('bottomOffset', '-')">-</button>
                  <input id="bottomOffset" type="number" min="4" max="60" value="28" step="1" />
                  <button class="number-btn" onclick="changeValue('bottomOffset', '+')">+</button>
                </div>
              </label>
            </div>
            <div class="arc-row">
              <label>
                字距(倍数)
                <div class="number-input-group">
                  <button class="number-btn" onclick="changeValue('bottomSpacing', '-')">-</button>
                  <input id="bottomSpacing" type="number" min="0.1" max="2" value="1.0" step="0.02" />
                  <button class="number-btn" onclick="changeValue('bottomSpacing', '+')">+</button>
                </div>
              </label>
              <label>
                字号(px)
                <div class="number-input-group">
                  <button class="number-btn" onclick="changeValue('bottomFontSize', '-')">-</button>
                  <input id="bottomFontSize" type="number" min="2" max="32" value="26" step="1" />
                  <button class="number-btn" onclick="changeValue('bottomFontSize', '+')">+</button>
                </div>
              </label>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script src="seal.js"></script>
</body>
</html>
